<!DOCTYPE html>
<html class="theme-next muse use-motion">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>liukelin - elastic 分词插件</title>
<style type="text/css">
/*table.hovertable {
    font-family: verdana,arial,sans-serif;
    font-size:11px;
    color:#333333;
    border-width: 1px;
    border-color: #999999;
    border-collapse: collapse;
}
table.hovertable th {
    background-color:#c3dde0;
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}*/
/*table.hovertable tr {
    background-color:#d4e3e5;
}*/

div.analyze_div  {
    margin:5px 5px;
}
div.analyze_div span:hover{
    /*background-color: red ;*/
    border:1px solid red;
}
div.analyze_div span {
    background-color: #a9c6c9;
    padding:0 5px;
    margin:0 3px;
}
.bg1{
    font-weight:bold;
    color:#F00;
}
.bg2{
    font-weight:bold;
    color:#F00;
}

.div0{
    padding:5px 0;
    width:100%;
}


.div1{
    margin:5px 5px;
    padding:5px 5px;
    border:1px solid #C0C0C0;
}
.div2{
    margin:5px 5px;
    padding:5px 5px;
    border:1px solid #C0C0C0;
}

.button1{
    padding:5px 5px;
    border:2px solid #77DDFF;
    height:25px;
}

.button2{
    padding:5px 5px;
    border:2px solid #77DDFF;
    height:25px;
    
}

.button1 .button2 hover{
    border:1px solid red;
}

</style>

<script type="text/javascript" src="./js/jquery-1.10.2.min.js"></script>
</head>

<body style="padding:5px 15px">
<div class="div0">
    词句：
    <input type="text" id="word" style="width:350px;height:25px" value="" >&nbsp;&nbsp;

    插件：
    <select id="plugins" >
      <option value ="ik" title="">ik</option>
    </select>&nbsp;&nbsp;

    模式：
    <select id="ik_type">
      <option value ="ik_max_word" title="ik_max_word：会将文本做最细粒度的拆分；尽可能多的拆分出词语">ik_max_word</option>
      <option value ="ik_smart" title="ik_smart：会做最粗粒度的拆分；已被分出的词语将不会再次被其它词语占有">ik_smart</option>
    </select>&nbsp;&nbsp;

    <input type="button" name="" id="search" value="搜索" class="button1">
    
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="button" name="" id="" value="新增测试文章" style="" onClick="test()" class="button2">
    <input type="button" name="" id="" value="添加分词" style="" onClick="test()" class="button2">
    <input type="button" name="" id="" value="添加屏蔽分词" onClick="test()" class="button2">
    <input type="button" name="" id="" value="添加同义词" onClick="test()" class="button2">

</div>


<div class="div1" id="div1" style="display: none">
    ik_max_word:
    <div class="analyze_div" id="analyze_span1"><span>asdas</span><span>asdas</span></div>
    ik_smart:
    <div class="analyze_div" id="analyze_span2"><span>asdas</span><span>asdas</span></div>
</div>
<!-- Table goes in the document BODY -->
<div class="" id="list">
    
</div>

<script type="text/javascript">

    $(function(){
        _search();
        $('#search').click(function(){
            _analyze();
            _search();
        });


    });

    // analyze
    function _analyze(){
        // analyze
        $.ajax({
            type: 'POST',
            data:{
                action:'analyze',
                word:$('#word').val(),
                // way_type:$('#way_type').val()
            },
            url: '/elastic-search-analyzer/controller/api.php',
            dataType: 'json',
            success: function(data){
                var html1 = '';
                var html2 = '';
                if (data) {
                    if (data.ik_max_word && data.ik_max_word.tokens && data.ik_max_word.tokens.length>0) {
                        $.each(data.ik_max_word.tokens, function(key,val){
                            html1 += '<span>'+val.token+'</span>';
                        }); 
                    }
                    if (data.ik_smart && data.ik_smart.tokens && data.ik_smart.tokens.length>0) {
                        $.each(data.ik_smart.tokens, function(key,val){
                            html2 += '<span>'+val.token+'</span>';
                        }); 
                    }
                }else{
                    alert('error.');
                }
                if (html1!='' || html2!='') {
                    $('#div1').show();
                }else{
                    $('#div1').hide();
                }
                $('#analyze_span1').html(html1);
                $('#analyze_span2').html(html2);
            }
        });
    }

    function _search(){
        // search
        $.ajax({
            type: 'POST',
            data:{
                action:'search',
                word:$('#word').val(),
                plugins:$('#plugins').val(),
                way_type:$('#way_type').val()
            },
            url: '/elastic-search-analyzer/controller/api.php',
            dataType: 'json',
            success: function(data){
                var html = '';
                if (data) {
                    if (data.list && data.list.length>0) {
                        $.each(data.list, function(key,val){
                            html += '<div class="div2">'+val.content+'</div>';
                        }); 
                    }
                }else{
                    alert('error.');
                }
                if (html=='') {
                    html='<div class="div2">没有记录.</div>';
                }
                $('#list').html(html);
            }
        });
    }


</script>

</body>
</html>











